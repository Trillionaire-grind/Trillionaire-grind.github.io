<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Tech Mastery For Seniors - Register</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                background-color: #f4f4f4;
            }
        
            video {
                display: block;
                width: 100%;
                max-width: 600px;
                margin: 20px auto;
            }
            .container {
                text-align: center;
                padding: 20px;
                padding-top: 0px;
            }
            label {
                font-size: 1.2em;
                margin-bottom: 10px;
                display: block;
                color: #333;
            }
            table {
                width: 80%;
                margin: 20px auto;
                border-collapse: collapse;
                background-color: white;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }
            th, td {
                padding: 10px;
                text-align: center;
                border: 1px solid #ddd;
            }
            th {
                background-color: black;
                color: white;
            }
            td input[type="radio"] {
                margin-top: 5px;
            }
            @media (max-width: 768px) {
                table {
                    width: 90%;
                }
                th, td {
                    font-size: 0.9em;
                }
            }
        </style>
    </head>
    <body>
        <p style="text-align: center; font-weight: bold; font-size: 32px;margin-top: 8px; margin-bottom: 0px;">Register</p>
        <div class="container">
            <!-- Video Section -->
            <video controls>
                <source src="your-video.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>

            <!-- Select your class label -->
            <p style="margin-left: 16px; text-align: left;">Select Your Class</p>
            <!-- Table for class selection -->
            <table>
                <tr>
                    <th>Last Wednesday</th>
                    <th>Last Thursday</th>
                </tr>
                <tr>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">10:00 AM - 11:30 AM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="class1" name="classRadio" value="class1" /> only 220 spots left
                            </label>                   
                        </div>
                    </td>                
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">10:00 AM - 11:30 AM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="class2" name="classRadio" value="class2" /> only 220 spots left
                            </label>                   
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">2:00 PM - 3:30 PM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="class3" name="classRadio" value="class3" /> only 220 spots left
                            </label>                   
                        </div>
                    </td>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">2:00 PM - 3:30 PM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="class4" name="classRadio" value="class4" /> only 220 spots left
                            </label>                   
                        </div>
                    </td>
                </tr>
            </table>

            <p style="margin-left: 16px; text-align: start;">Select Your Workshop</p>
            <table>
                <tr>
                    <th>First Wednesday</th>
                    <th>First Thursday</th>
                </tr>
                <tr>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">8:00 AM - 11:00 AM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="workshop1" name="workshopRadio" value="workshop1" /> only 60 spots left
                            </label>                   
                        </div>
                    </td>                
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">8:00 AM - 11:00 AM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="workshop2" name="workshopRadio" value="workshop2" /> only 60 spots left
                            </label>                   
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">1:00 PM - 4:00 PM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="workshop3" name="workshopRadio" value="workshop3" /> only 60 spots left
                            </label>                   
                        </div>
                    </td>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">1:00 PM - 4:00 PM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="workshop4" name="workshopRadio" value="workshop4" /> only 60 spots left
                            </label>                   
                        </div>
                    </td>
                </tr>
            </table>
            <table  style="width: 40%;">
                <tr>
                    <th>First Friday</th>
                </tr>
                <tr>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">8:00 AM - 11:00 AM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="workshop5" name="workshopRadio" value="workshop5" /> only 60 spots left
                            </label>                   
                        </div>
                    </td>                
                </tr>
                <tr>
                    <td>
                        <p style="font-weight: bold; margin-bottom: 0px;">1:00 PM -  4:00 PM</p>
                        <div style="display: flex; margin-top: 0px;">
                            <label style="font-size: 14px; margin-top: 0px; margin-left: auto;">
                                <input style="vertical-align: baseline;" type="radio" id="workshop6" name="workshopRadio" value="workshop6" /> only 60 spots left
                            </label>                   
                        </div>
                    </td>   
                </tr>
            </table>
        </div>
        <div style="width: 40%; margin-left: auto ; margin-right: auto; height: 32px; background-color: black; color: white; text-align: center; margin-bottom: 32px; cursor: pointer; border-radius: 10px; " id="doneBtn">
            <p style="padding: 8px;">
                done
            </p>
        </div>
    </body>
    
    <script type="module">
        // Firebase SDK and login code
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-analytics.js";
        import { getFirestore, doc, getDoc, updateDoc } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, signOut} from "https://www.gstatic.com/firebasejs/11.2.0/firebase-auth.js"
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyAw_s-SsnRQp44GoR7_PZjzocHCTaansfY",
            authDomain: "tech-mastery-academy.firebaseapp.com",
            projectId: "tech-mastery-academy",
            storageBucket: "tech-mastery-academy.firebasestorage.app",
            messagingSenderId: "205345673412",
            appId: "1:205345673412:web:d8970165489c414745b991",
            measurementId: "G-KLKCTD047P"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth(app)

        const db = getFirestore(app);
        const userUID = localStorage.getItem('userUID');

        var selectedWorkshop = document.querySelector('input[name = "workshopRadio"]:checked')
        var selectedClass = document.querySelector(`input[name = "classRadio"]:checked`)

        function openApp(){
            let url = `mainView.html`
            window.location.replace(url);
        }

        let doneBtn = document.getElementById("doneBtn")
        async function udateClasses(userId, classChoice, workshopChoice)
        {
            const testRef = doc(db, "users", userUID);

            try {
                await updateDoc(testRef, {
                    classChoice: `${classChoice}`, 
                    workshopChoice: `${workshopChoice}`
                });
                alert("prefrences updated successfully");
                openApp();
            } catch (error) {
                alert(`Error updating document: ${error}`);
            }
        }

        function workshopAndClass(userUID)
        {
            var selectedWorkshop = document.querySelector('input[name = "workshopRadio"]:checked')
            var selectedClass = document.querySelector('input[name = "classRadio"]:checked')
            if(selectedWorkshop == null && selectedClass == null){
                alert('Please select a class and a workshop')
            }else if(selectedWorkshop == null){
                alert('please select a workshop')
            }
            else if(selectedClass == null){
                alert('please select a class')
            }else{
                udateClasses(userUID, selectedClass.value, selectedWorkshop.value)            
            }
        }

        doneBtn.onclick = () => {
            workshopAndClass(userUID)
        }
    </script>
</html>
