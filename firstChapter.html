<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="shortcut icon" type="image/x-icon" href="secretAttractionViews/assets/heart_icon.ico" />
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Get Your Copy of 'A Secret Attraction Between Mentor and Mentee'</title>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-3Y62Q36WJF"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
                function gtag(){dataLayer.push(arguments);}
                gtag('js', new Date());

                gtag('config', 'G-3Y62Q36WJF');
        </script>
        <!-- Meta Pixel Code -->
        <script>
            !function(f,b,e,v,n,t,s)
            {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
            n.callMethod.apply(n,arguments):n.queue.push(arguments)};
            if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
            n.queue=[];t=b.createElement(e);t.async=!0;
            t.src=v;s=b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
            fbq('init', '1047835253811906');
            fbq('track', 'PageView');
        </script>
        <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=1047835253811906&ev=PageView&noscript=1"/>
        </noscript>
        <!-- End Meta Pixel Code -->
        <style>
            * {
                box-sizing: border-box;
            }

            input[type="text"], input[type="email"] {
                width: 100%;
                padding: 16px;
                margin-bottom: 15px;
                border: 1px solid #ccc;
                border-radius: 5px;
                background-color: #E9EDF5;
                color: #333;
                font-size: 16px;
                max-width: 600px;
            }

            input[type="text"]::placeholder {
                color: #707070;
            }

            button {
                width: 100%;
                padding: 16px;
                background-color: #FF0C21;
                color: white;
                border: none;
                border-radius: 5px;
                font-size: 16px;
                cursor: pointer;
                max-width: 600px;
            }

            button:hover {
                background-color: #e50917;
            }

            .container {
                width: 90%;
                max-width: 400px;
                text-align: center;
            }
        </style>
    </head>
    <body>
        <div style="text-align: center;">
            <p style="font-weight: bold; width: 100%; margin-top: 8px; text-align: center; margin-bottom: 0px; font-size: 4vh; ">A Secret Attraction</p>
            <p style="text-align: center; margin-top: 0px; font-size: 2vh;">Between Mentor and Mentee</p>
            <img height="300vh" width="190vh" src="secretAttractionViews/assets/book_cover.jpg"/>
            <p style="font-weight: bold; font-size: 4vh; margin-bottom: 0px;">Download the first chapter</p>
            <p style="margin-top: 0px; font-size: 2vh;">Take advantage of my latest boook with a FREE preview</p>
            <input type="text" id="nameET" placeholder="Enter your name">
            <br>
            <input type="email" id="emailET" placeholder="Enter your email">
            <br>
            <button id="requestBtn" style="font-weight: bold; font-size: 3vh;">Yes, I want my FREE chapter</button>
        </div>
    </body>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-analytics.js";
        import { getFirestore, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js";
        import { collection, doc, addDoc, setDoc, getDocs, getDoc } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-firestore.js"; 
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
    
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
        apiKey: "AIzaSyCvdbEnz-WTuJdH4sF3lV3Y-wgOZurHHqM",
        authDomain: "secret-attraction-3eff4.firebaseapp.com",
        projectId: "secret-attraction-3eff4",
        storageBucket: "secret-attraction-3eff4.firebasestorage.app",
        messagingSenderId: "12436460437",
        appId: "1:12436460437:web:8c6dc8e083635481055c9c",
        measurementId: "G-GT9YFDM1RT"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app)

        function newTab() {
            window.location.replace("secretAttractionViews/downloadPreview.html");
        }

        async function addLead(name, email)
        {
            let lead = new Object()

            lead.name = name 
            lead.email = email 

            const leadRef = await addDoc(collection(db, 'leads'), {
                lead
            });

            //alert(`document writtenn with ID: ${leadRef.id}`)
            newTab()
        }

        let requestBtn = document.getElementById("requestBtn")

        requestBtn.onclick = () => {
            let name = nameET.value 
            let email = emailET.value
            addLead(name, email)
        }
  </script>
</html>
